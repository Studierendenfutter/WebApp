(this["webpackJsonpstudierendenfutter-frontend"]=this["webpackJsonpstudierendenfutter-frontend"]||[]).push([[0],{32:function(e,t,n){e.exports=n(64)},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},55:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a);n(34),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(19),i=n(9),u=n(5),l=n(3);n(35);function o(e){var t=e.title,n=e.children;return r.a.createElement("div",null,r.a.createElement("h1",{className:"sf-funnel-step-title"},t),n)}n(36);function s(e){var t=e.percent,n=void 0===t?0:t;return r.a.createElement("div",{className:"sf-progress-bar-wrapper"},r.a.createElement("label",{className:"sf-progress-bar-label",style:{marginLeft:n/2+"%"}},n.toFixed(0)," %"),r.a.createElement("div",{className:"sf-progress-bar",style:{width:n+"%"}}))}var d=n(2),m=n.n(d),f=n(7),h=n(10),p=n.n(h);function E(e){return b.apply(this,arguments)}function b(){return(b=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var v={BACKEND_URL:"http://api.studierendenfutter.de:8000"},g=v.BACKEND_URL+"/userCategories";function k(){var e=Object(a.useState)({}),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){(function(){var e=Object(f.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(g);case 2:if(t=e.sent,n={},t){e.next=7;break}return r({}),e.abrupt("return");case 7:for(a=0;a<t.length;a++)n[t[a].name]=t[a].id;r(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),n}function y(e,t){return p.a.post(e,t)}var j=v.BACKEND_URL+"/users";function O(e){y(j,e)}function C(e){var t=Object.keys(e).map((function(t){return t+"="+e[t]})).join("&");return t?"?"+t:""}function w(e){var t=C(e);return E(v.BACKEND_URL+"/canteens"+t)}function x(e){var t=Object(a.useState)(),n=Object(l.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){function t(){return(t=Object(f.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:n=t.sent,c(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),r}var L=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],N=["Gerichte mit Fleisch","Gerichte mit Fisch","Vegetarische Gerichte","Vegane Gerichte"],I={students:"Preis f\xfcr Studierende",employees:"Preis f\xfcr Besch\xe4ftigte der Universit\xe4t",other:"Preis f\xfcr Nichtstudierende"};n(55);function M(){var e=Object(a.useState)({email:"",days:[!0,!0,!0,!0,!0,!0],semesterBreaks:!0,meals:[!0,!0,!0,!0],places:[!0,!0,!0],userCategoryId:1,name:"",city:"M\xfcnster"}),t=Object(l.a)(e,2),n=t[0],d=t[1],m=x({city:n.city});Object(a.useEffect)((function(){if(!n.canteens&&m){var e=m.reduce((function(e,t){return e[t.id]=!0,e}),{});d(Object(u.a)({},n,{canteens:e}))}}),[m,d]);var f=Object(a.useMemo)((function(){return m?m.reduce((function(e,t){var n=Object(u.a)({},e);return t.type?(n[t.type]||(n[t.type]=[]),n[t.type].push(t),n):e}),{}):{}}),[m]),h=k(),p=Object(a.useState)(0),E=Object(l.a)(p,2),b=E[0],v=E[1],g=function(){v(b+1)},y=function(e,t){d(Object(u.a)({},n,Object(i.a)({},e,t)))},j=function(e){var t=Object(c.a)(n.days);t[e]=!t[e],y("days",t)},C=function(e){var t=Object(c.a)(n.meals);t[e]=!t[e],y("meals",t)},w=function(e,t){var a=n.canteens;for(var r in f[e])a[f[e][r].id]=t;d(Object(u.a)({},n,{canteens:a}))},M=function(e,t){var a=n.canteens;a[e]=t,d(Object(u.a)({},n,{canteens:a}))},D=r.a.createElement("button",{onClick:g},"Weiter");return h?r.a.createElement("div",{className:"sf-funnel"},0===b&&r.a.createElement(o,{title:"Hey lass uns loslegen! Wie m\xf6chtest du dich anmelden?"},r.a.createElement("button",{onClick:g},"In 7 Fragen schnell zum Individuellen Lunchletter"),r.a.createElement("button",{onClick:function(){v(99)}},"Direkt anmelden ohne individuelle Einstellungen")),1===b&&r.a.createElement(o,{title:"Alles klar: Verr\xe4tst du uns zuerst, an welche Mail-Adresse wir den Lunchletter schicken sollen?"},r.a.createElement("input",{type:"text",value:n.email,onChange:function(e){y("email",e.target.value)}}),D),2===b&&r.a.createElement(o,{title:"Perfekt du bekommst den Lunchletter an ".concat(n.email,"! An welchen Tagen m\xf6chtest du den Lunchletter haben?")},L.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",key:e,checked:n.days[t],onClick:function(){j(t)}})," ",r.a.createElement("label",{onClick:function(){j(t)}},e))})),D),3===b&&r.a.createElement(o,{title:"Auch in den Semesterferien?"},r.a.createElement("button",{onClick:function(){y("semesterBreaks",!0),g()}},"ja"),r.a.createElement("button",{onClick:function(){y("semesterBreaks",!1),g()}},"nein")),4===b&&r.a.createElement(o,{title:"Ist notiert. Welche Gerichte sollen wir in deinen pers\xf6nlichen Lunchletter aufnehmen?"},N.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",key:e,checked:n.meals[t],onClick:function(){C(t)}})," ",r.a.createElement("label",{onClick:function(){C(t)}},e))})),D),5===b&&r.a.createElement(o,{title:"Wunderbar. F\xfcr welche Orte m\xf6chtest du das Mittagsangebot angezeigt bekommen? Du kannst dies auch noch genauer festlegen:"},Object.keys(f).map((function(e){var t=f[e].reduce((function(e,t){return e||n.canteens&&n.canteens[t.id]}),!1);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",checked:t,onChange:function(t){return w(e,t.target.checked)}}),r.a.createElement("label",{onClick:function(){return w(e,!t)}},e)),r.a.createElement("div",{className:"sf-funnel-canteens-wrapper"},t&&f[e].map((function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",checked:n.canteens&&n.canteens[e.id],onChange:function(t){return M(e.id,t.target.checked)}}),r.a.createElement("label",{onClick:function(){return M(e.id,!n.canteens[e.id])}},e.name))}))))})),D),6===b&&r.a.createElement(o,{title:"Super, wir haben es fast geschafft. Jetzt m\xfcssen wir nur noch wissen, welchen Preis wir dir f\xfcr die Mittagsgerichte anzeigen sollen:"},Object.keys(I).map((function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"radio",key:e,checked:h[e]===n.userCategoryId,onClick:function(){return y("userCategoryId",h[e])}}),r.a.createElement("label",{onClick:function(){return y("userCategoryId",h[e])}},I[e]))})),D),7===b&&r.a.createElement(o,{title:"Fertig, wir haben deinen Lunchletter konfiguriert. Sehr gerne w\xfcrden wir dich auch mit Namen ansprechen:"},r.a.createElement("input",{type:"text",placeholder:"Wie hei\xdft du?",onChange:function(e){return y("name",e.target.value)}}),r.a.createElement("label",null,"Wir verwenden deinen Namen ausschlie\xdflich f\xfcr die Personalisierung deiner Mails."),r.a.createElement("button",{onClick:function(){O(n),g()}},"Weiter")),8===b&&r.a.createElement(o,{title:"Cool ".concat(n.name,"! Wir haben dir gerade eine Best\xe4tigungsmail gesendet. Bitte best\xe4tige den\n        Link um ab sofort den Lunchletter zu erhalten.")}),99===b&&r.a.createElement(o,{title:"Flott zu deinem Lunchletter: Dann ben\xf6tigen wir nur noch deine Mailadresse:"},r.a.createElement("input",{type:"text",value:n.email,onChange:function(e){y("email",e.target.value)}}),r.a.createElement("button",{onClick:function(){O(n),v(8)}},"Weiter")),r.a.createElement("div",{style:{marginTop:"10px"}},r.a.createElement(s,{percent:100*Math.min(9,b+1)/9}))):r.a.createElement("div",null,"Hey")}var D=n(31),B=n(1);function A(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function _(){var e=A("uId"),t=A("code");return Object(a.useEffect)((function(){!function(e,t){y(v.BACKEND_URL+"/users/"+e+"/confirm",{code:t})}(e,t)})),r.a.createElement("div",null,"Confirmed")}function S(e){var t=e.uId,n=e.code;return E(v.BACKEND_URL+"/users/"+t+"/settings?code="+n)}function W(e,t){return E(v.BACKEND_URL+"/users/"+e+"/canteens?code="+t)}function R(e,t){var n=t.userId,a=t.code;!function(e,t){p.a.delete(e,{data:t})}(v.BACKEND_URL+"/users/"+n+"/canteens",{code:a,canteenIds:e})}function U(e,t){var n=Object(a.useState)({}),r=Object(l.a)(n,2),c=r[0],i=r[1];Object(a.useEffect)((function(){(function(){var n=Object(f.a)(m.a.mark((function n(){var a,r,c,u;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,W(e,t);case 2:if(a=n.sent,r={},a){n.next=7;break}return i({}),n.abrupt("return");case 7:for(c in a)u=a[c],r[u.canteen_id]=u;i(r);case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[]);return[c,function(n){!function(e,t){var n=t.userId,a=t.code;y(v.BACKEND_URL+"/users/"+n+"/canteens",{code:a,canteenId:e})}(n,{userId:e,code:t})},function(n){R([n],{userId:e,code:t})}]}var F=["mondays","tuesdays","wednesdays","thursdays","fridays","saturdays"],K=["meat_meals","fish_meals","vegetarian_meals","vegan_meals"];function z(){var e=A("uId"),t=A("code"),n=function(e,t){var n=Object(a.useState)({}),r=Object(l.a)(n,2),c=r[0],i=r[1],u=Object(a.useState)(!0),o=Object(l.a)(u,2),s=o[0],d=o[1];return Object(a.useEffect)((function(){function n(){return(n=Object(f.a)(m.a.mark((function n(){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S({uId:e,code:t});case 2:a=n.sent,i(a),d(!1);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[]),[c,i,s]}(e,t),c=Object(l.a)(n,3),s=c[0],d=c[1],h=c[2],p=U(e,t),E=Object(l.a)(p,3),b=E[0],v=E[1],g=E[2],y=x({city:"M\xfcnster"}),j=Object(a.useMemo)((function(){return y?y.reduce((function(e,t){var n=Object(u.a)({},e);return t.type?(n[t.type]||(n[t.type]=[]),n[t.type].push(t),n):e}),{}):{}}),[y]),O=function(e,t){var n=[];for(var a in j[e])n.push(j[e][a].id);t?v(n):g(n)},C=function(e,t){t?v(e):g(e)},w=k(),M=function(e,t){d(Object(u.a)({},s,Object(i.a)({},e,t)))},D=Object(a.useMemo)((function(){return F.map((function(e){return s[e]}))}),[s]),B=function(e){d(Object(u.a)({},s,Object(i.a)({},F[e],!s[F[e]])))},_=function(e){d(Object(u.a)({},s,Object(i.a)({},K[e],!s[K[e]])))};return h?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",null,r.a.createElement(o,{title:"An welche Mail-Adresse sollen wir den Lunchletter schicken ?"},r.a.createElement("input",{type:"text",value:s.email,onChange:function(e){M("email",e.target.value)}})),r.a.createElement(o,{title:"An welchen Tagen m\xf6chtest du den Lunchletter haben?"},L.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",key:e,checked:D[t],onClick:function(){B(t)}})," ",r.a.createElement("label",{onClick:function(){B(t)}},e))}))),r.a.createElement(o,{title:"Welche Gerichte sollen wir in deinen pers\xf6nlichen Lunchletter aufnehmen?"},N.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",key:e,checked:s[K[t]],onClick:function(){_(t)}})," ",r.a.createElement("label",{onClick:function(){_(t)}},e))}))),r.a.createElement(o,{title:"F\xfcr welche Orte m\xf6chtest du das Mittagsangebot angezeigt bekommen?"},Object.keys(j).map((function(e){var t=j[e].reduce((function(e,t){return e||b&&b[t.id]}),!1);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",checked:t,onChange:function(t){return O(e,t.target.checked)}}),r.a.createElement("label",{onClick:function(){return O(e,!t)}},e)),r.a.createElement("div",{className:"sf-funnel-canteens-wrapper"},t&&j[e].map((function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",checked:b&&!!b[e.id],onChange:function(t){return C(e.id,t.target.checked)}}),r.a.createElement("label",{onClick:function(){return C(e.id,!b[e.id])}},e.name))}))))}))),r.a.createElement(o,{title:"Welchen Preis sollen wir dir f\xfcr die Mittagsgerichte anzeigen?"},Object.keys(I).map((function(e){return r.a.createElement("div",null,r.a.createElement("input",{type:"radio",key:e,checked:w[e]===s.user_category_id,onClick:function(){return M("userCategoryId",w[e])}}),r.a.createElement("label",{onClick:function(){return M("userCategoryId",w[e])}},I[e]))}))),r.a.createElement(o,{title:"Dein Name:"},r.a.createElement("input",{type:"text",placeholder:"Wie hei\xdft du?",onChange:function(e){return M("name",e.target.value)},value:s.name})))}function G(){return Object(a.useEffect)((function(){console.log("Cancel here!")})),r.a.createElement("div",null,"Canceled")}var P=n(15);function H(e,t){var n=C(t);return E(v.BACKEND_URL+"/canteens/"+e+"/meals"+n)}function J(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear()+"-"+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"-"+(e.getDate()<10?"0":"")+e.getDate();return t}(),t=x({city:"M\xfcnster"}),n=Object(a.useState)({}),c=Object(l.a)(n,2),o=c[0],s=c[1];return Object(a.useEffect)((function(){function n(e){return a.apply(this,arguments)}function a(){return(a=Object(f.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(n,{date:e});case 2:a=t.sent,s(Object(u.a)({},a,Object(i.a)({},n,a)));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}if(t)for(var r in t)n(t[r].id)}),[t,e]),r.a.createElement("div",null,r.a.createElement("div",null,t&&t.map((function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,e.name),o[e.id]&&o[e.id].length>0?r.a.createElement("div",null,o[e.id].map((function(e){return r.a.createElement("div",null,e.name)}))):r.a.createElement("div",null,"Heute keine Gerichte verf\xfcgbar"))}))))}var T=function(){return r.a.createElement(r.a.StrictMode,null,r.a.createElement(D.a,null,r.a.createElement(B.c,null,r.a.createElement(B.a,{path:"/confirm"},r.a.createElement(_,null)),r.a.createElement(B.a,{path:"/cancel"},r.a.createElement(G,null)),r.a.createElement(B.a,{path:"/settings"},r.a.createElement(z,null)),r.a.createElement(B.a,{path:"/funnel"},r.a.createElement(M,null)),r.a.createElement(B.a,{path:"/canteens"},r.a.createElement(J,null)))))},V=document.getElementById("root");V.hasChildNodes()?Object(P.hydrate)(r.a.createElement(T,null),V):Object(P.render)(r.a.createElement(T,null),V),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.5c91a8bf.chunk.js.map